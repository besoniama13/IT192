#!/bin/sh


addserver() {
	printf "\tServer Name : "; read -r servername
	printf "\tServer Address and Port : "; read -r serveraddress
	printf "\tserver $servername $serveraddress\n" | tee -a $file
}

file="$HOME/trash/haproxy.cfg"
[ -z "$file" ] && touch "$file"

#intro
printf "\nfrontend localhttp\n" | tee $file
printf "\tbind *:8000\n" | tee -a $file
printf "\ttimeout client 60s\n" | tee -a $file
printf "\tdefault_backend localservers\n\n" | tee -a $file


printf "backend localservers\n" | tee -a $file
#server
printf "\ttimeout connect 10s\n" | tee -a $file
printf "\ttimeout server 100s\n" | tee -a $file

addserver
addserver
addserver

haproxy -f $file
